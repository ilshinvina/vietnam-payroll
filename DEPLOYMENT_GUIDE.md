# 4개 회사 배포 가이드

## 배포 전략 (3가지 옵션)

### 🎯 **추천 옵션 1: 폴더 분리 방식**
각 회사별로 별도 폴더를 만들어 완전히 독립적으로 운영

**장점:**
- ✅ 가장 안전 (데이터 섞일 위험 없음)
- ✅ 각 회사별 백업 관리 용이
- ✅ 설정/직원 데이터 완전 독립
- ✅ 추후 서버 이전 시에도 폴더만 옮기면 됨

**구조:**
```
D:\PAYROLL\
├── COMPANY_A\           # 회사 A
│   ├── index.html
│   ├── salary-input.html
│   ├── settings.html
│   └── (모든 JS, CSS 파일)
│
├── COMPANY_B\           # 회사 B
│   ├── index.html
│   └── ...
│
├── COMPANY_C\           # 회사 C
│   └── ...
│
└── COMPANY_D\           # 회사 D
    └── ...
```

**배포 방법:**
1. 현재 MONEY 폴더를 COMPANY_A로 복사
2. COMPANY_A를 COMPANY_B, C, D로 복사
3. 각 폴더의 settings.html을 열어서 회사별 설정 입력
4. 각 폴더를 바탕화면에 바로가기 생성

**브라우저 사용법:**
- 각 회사 폴더의 index.html을 즐겨찾기에 추가
- 즐겨찾기 이름: "급여관리 - 회사A", "급여관리 - 회사B" 등

---

### ⚙️ **옵션 2: 브라우저 프로필 분리**
하나의 폴더만 사용하고 브라우저 프로필로 구분

**장점:**
- 💾 디스크 공간 절약
- 🔄 파일 업데이트 시 한 번만 수정

**단점:**
- ⚠️ 프로필 전환을 실수하면 잘못된 회사 데이터 입력 위험
- 🔀 백업 시 각 프로필별로 따로 해야 함

**Chrome 프로필 설정:**
1. Chrome 우측 상단 프로필 아이콘 클릭
2. "추가" → "회사A 급여", "회사B 급여" 등 생성
3. 각 프로필에서 동일한 index.html 열기
4. LocalStorage가 프로필별로 독립적으로 저장됨

**Edge 프로필 설정:**
1. Edge 우측 상단 프로필 아이콘 클릭
2. "프로필 추가" → 회사별 프로필 생성
3. 각 프로필에서 동일 파일 사용

---

### 🏢 **옵션 3: 멀티 회사 지원 (추후 개발 필요)**
앱 자체에 회사 선택 기능 추가

**필요한 개발:**
- 로그인 화면 또는 회사 선택 드롭다운 추가
- LocalStorage 키에 회사 ID 포함
- 데이터 분리 로직 추가

**현재 구조:**
```javascript
localStorage.setItem('vietnamPayrollSettings_2025', ...)
localStorage.setItem('vietnamPayrollEmployees', ...)
```

**변경 필요 구조:**
```javascript
localStorage.setItem('companyA_vietnamPayrollSettings_2025', ...)
localStorage.setItem('companyA_vietnamPayrollEmployees', ...)
localStorage.setItem('companyB_vietnamPayrollSettings_2025', ...)
```

**개발 시간:** 약 2-3시간 소요 예상

---

## 🎯 **즉시 실행 가능한 배포 계획**

### 단계 1: 폴더 복사 (옵션 1 선택 시)
```bash
# PowerShell 명령어
cd D:\xyz
Copy-Item -Path "MONEY" -Destination "PAYROLL_COMPANY_A" -Recurse
Copy-Item -Path "MONEY" -Destination "PAYROLL_COMPANY_B" -Recurse
Copy-Item -Path "MONEY" -Destination "PAYROLL_COMPANY_C" -Recurse
Copy-Item -Path "MONEY" -Destination "PAYROLL_COMPANY_D" -Recurse
```

### 단계 2: 각 회사별 초기 설정
각 폴더의 `settings.html`을 열어서:

1. **회사 정보 탭**
   - ✏️ 회사명
   - ✏️ 회사 주소
   - ✏️ 회사 전화번호
   - ✏️ 세금코드

2. **식대 설정**
   - ✏️ 평일 점심 식대 금액
   - ✏️ 평일 저녁 식대 금액
   - ✏️ 저녁 식대 지급 조건 (연장근무 X시간 이상)
   - ✏️ 일요일 점심/저녁 지급 조건
   - ✏️ 연차 시 점심 지급 여부
   - ✏️ 사유결근 시 점심 지급 조건

3. **수당 설정**
   - ➕ 회사별 수당 추가 (개근수당, 교통비, 위험수당 등)
   - ⚙️ 무단결근/사유결근/연차 시 지급 규칙 설정

4. **보험료율** (대부분 동일, 필요 시만 수정)
   - 근로자 부담: BHXH 8%, BHYT 1.5%, BHTN 1%
   - 회사 부담: BHXH 17.5%, BHYT 3%, BHTN 1%

5. **💾 저장** 클릭

### 단계 3: 직원 등록
`salary-input.html` 열어서:
- ➕ 직원 추가 버튼 클릭
- 직원 정보 입력 (이름, 입사일, 기본급, 은행계좌 등)
- 저장

### 단계 4: 첫 달 급여 입력 테스트
- 📅 현재 월 선택
- 👤 직원 선택
- ⏰ 근무시간 입력
- 💰 수당 확인
- ✅ 확정

### 단계 5: 검증
- `index.html`에서 급여 현황 확인
- 📋 상세 버튼으로 급여 대장 확인
- 📄 PDF 다운로드 테스트
- 📊 엑셀 다운로드 테스트

---

## 📋 **실전 테스트 체크리스트**

### ✅ **회사별 설정 검증**
- [ ] 회사명이 급여 대장에 정확히 표시되는가?
- [ ] 회사 주소/전화번호가 PDF에 출력되는가?
- [ ] 세금코드가 올바른가?

### ✅ **식대 계산 검증**
- [ ] 평일 점심 식대가 자동 지급되는가?
- [ ] 연장근무 X시간 이상 시 저녁 식대가 지급되는가?
- [ ] 일요일 근무 시 점심 식대 조건이 맞는가?
- [ ] 일요일 장시간 근무 시 저녁 식대가 지급되는가?
- [ ] 연차 사용 시 점심 식대 규칙이 적용되는가?
- [ ] 사유결근 시 점심 식대 조건이 맞는가?

### ✅ **수당 계산 검증**
- [ ] 무단결근 시 수당이 올바르게 차감되는가?
  - 0원 지급 수당 → 0원
  - 비율 지급 수당 → 근무일 비율만큼 지급
  - 전액 지급 수당 → 전액 지급
- [ ] 사유결근 시 수당 규칙이 적용되는가?
- [ ] 연차 사용 시 수당 규칙이 적용되는가?
- [ ] 정상 출근 시 모든 수당이 전액 지급되는가?

### ✅ **보험료 계산 검증**
- [ ] BHXH: 근로자 8%, 회사 17.5%
- [ ] BHYT: 근로자 1.5%, 회사 3%
- [ ] BHTN: 근로자 1%, 회사 1%
- [ ] 노조비: 1%
- [ ] 보험료 = 기본급 × 요율 (정확한가?)

### ✅ **소득세 계산 검증**
- [ ] 과세소득 계산이 정확한가?
  - 총급여 - 비과세(식대, 초과수당) - 보험료 = 과세소득
- [ ] 공제액이 올바른가?
  - 본인 공제: 11,000,000đ
  - 부양가족 공제: 4,400,000đ × 인원수
- [ ] 7단계 누진세율이 정확히 적용되는가?

### ✅ **출력물 검증**
- [ ] PDF 급여 대장이 깨지지 않고 출력되는가?
- [ ] 엑셀 다운로드가 정상적으로 되는가?
- [ ] 한글과 베트남어가 모두 정확히 표시되는가?
- [ ] 숫자 포맷이 올바른가? (1,000,000đ 형식)

### ✅ **데이터 관리 검증**
- [ ] 월별 급여 이력이 정확히 저장되는가?
- [ ] 확정 인원 진행률이 올바르게 표시되는가? (예: 3/16)
- [ ] 최초 등록일이 정확히 기록되는가?
- [ ] 전체 데이터 백업이 정상 작동하는가?
- [ ] 백업 파일 복원이 정상 작동하는가?

### ✅ **실제 운영 시나리오 테스트**
1. **시나리오 1: 정상 출근 직원**
   - 정규시간: 208시간
   - 연장근무: 10시간
   - 야간근무: 5시간
   - 주말근무: 8시간
   - 예상: 모든 수당 전액 지급, 식대 정상 지급

2. **시나리오 2: 무단결근 1일 직원**
   - 정규시간: 200시간
   - 무단결근: 1일
   - 예상: 수당 규칙에 따라 차감, 결근일 식대 미지급

3. **시나리오 3: 사유결근 0.5일 직원 (조기퇴근)**
   - 정규시간: 4시간
   - 사유결근: 0.5일
   - 예상: 4시간 이상 시 점심 식대 지급, 수당 규칙 적용

4. **시나리오 4: 연차 사용 직원**
   - 연차: 2일
   - 정규시간: 192시간
   - 예상: 연차 시 점심 식대 규칙 적용, 수당 규칙 적용

5. **시나리오 5: 일요일 장시간 근무**
   - 일요일 근무: 14시간 (정규 8h + 연장 6h)
   - 예상: 일요일 점심 + 저녁 식대 모두 지급

---

## 🚨 **주의사항**

### ⚠️ **데이터 백업**
- 매월 급여 확정 후 반드시 백업 (💾 전체 데이터 백업)
- 백업 파일명 예시: `backup_회사A_2025년4월_20250430.json`
- 중요 시점마다 백업: 월말, 분기말, 연말

### ⚠️ **브라우저 LocalStorage 제한**
- 용량 제한: 약 5-10MB (브라우저마다 다름)
- 직원 수 많거나 오래 사용 시 용량 확인 필요
- F12 → Application → Local Storage에서 확인 가능

### ⚠️ **브라우저 캐시 삭제 주의**
- "쿠키 및 기타 사이트 데이터 삭제" 시 LocalStorage도 삭제됨!
- 백업 없이 삭제하면 모든 데이터 영구 손실
- 브라우저 정리 시 반드시 백업 먼저!

### ⚠️ **파일 경로 주의**
- 파일을 다른 위치로 이동하면 LocalStorage 데이터 연결 끊김
- 예: `D:\xyz\MONEY` → `D:\payroll\MONEY` 이동 시 새 LocalStorage 생성
- 이동 전 백업 → 이동 후 복원 필요

### ⚠️ **보안**
- LocalStorage는 암호화되지 않음
- 급여 데이터는 민감 정보이므로 PC 보안 필수
- 공용 PC 사용 금지
- 백업 파일도 안전한 곳에 보관

---

## 📞 **배포 후 지원**

### 문제 발생 시 확인 사항
1. **데이터가 표시되지 않음**
   - F12 → Console 탭에서 에러 확인
   - Application → Local Storage에서 데이터 존재 여부 확인

2. **계산이 이상함**
   - 회사 설정 확인 (settings.html)
   - 직원 기본급 확인
   - 보험료율/소득세율 확인

3. **PDF/엑셀 다운로드 안 됨**
   - 브라우저 팝업 차단 해제
   - 다운로드 폴더 권한 확인

4. **설정이 저장 안 됨**
   - 💾 저장 버튼을 눌렀는지 확인
   - F12 → Console에서 에러 확인

---

## 🎓 **사용자 교육 체크리스트**

각 회사 담당자에게 교육:
- [ ] 직원 등록/수정 방법
- [ ] 월별 급여 입력 방법
- [ ] 확정 프로세스
- [ ] PDF/엑셀 출력 방법
- [ ] 데이터 백업/복원 방법
- [ ] 회사 설정 변경 방법 (식대, 수당, 보험료율 등)
- [ ] 문제 발생 시 대응 방법

---

**마지막 업데이트**: 2025-11-15
**배포 준비 완료**: ✅
